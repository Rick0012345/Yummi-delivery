{% extends "base.html" %}

{% block title %}Cozinha - Lanchonete{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-12">
        <div class="card shadow">
            <div class="card-header py-3 d-flex justify-content-between align-items-center">
                <h6 class="m-0 font-weight-bold text-primary">Pedidos em Preparo</h6>
                <div>
                    <button class="btn btn-sm btn-outline-primary me-2" id="btnAtualizar">
                        <i class="bi bi-arrow-clockwise me-1"></i> Atualizar
                    </button>
                    <div class="form-check form-switch d-inline-block ms-2">
                        <input class="form-check-input" type="checkbox" id="atualizacaoAutomatica" checked>
                        <label class="form-check-label" for="atualizacaoAutomatica">Atualização Automática</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row" id="pedidosContainer">
    <!-- Pedido 1 -->
    <div class="col-md-4 mb-4">
        <div class="card shadow h-100">
            <div class="card-header py-3 d-flex justify-content-between align-items-center bg-warning text-white">
                <h6 class="m-0 font-weight-bold">Pedido #1234</h6>
                <span class="badge bg-light text-dark">09:45</span>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Cliente:</strong> João Silva<br>
                    <strong>Tipo:</strong> Delivery<br>
                    <strong>Observação:</strong> Entregar o mais rápido possível.
                </div>
                
                <div class="list-group mb-3">
                    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>1x X-Tudo</strong>
                            <div class="small text-muted">Sem cebola</div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success">
                                <i class="bi bi-check-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>1x Batata Frita</strong>
                            <div class="small text-muted">Porção grande</div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success">
                                <i class="bi bi-check-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>1x Refrigerante</strong>
                            <div class="small text-muted">Coca-Cola</div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success">
                                <i class="bi bi-check-lg"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="d-grid gap-2">
                    <button class="btn btn-success">
                        <i class="bi bi-check-circle me-1"></i> Pedido Pronto
                    </button>
                    <button class="btn btn-outline-danger">
                        <i class="bi bi-exclamation-triangle me-1"></i> Reportar Problema
                    </button>
                </div>
            </div>
            <div class="card-footer text-muted">
                <div class="progress">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100">Em preparo</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pedido 2 -->
    <div class="col-md-4 mb-4">
        <div class="card shadow h-100">
            <div class="card-header py-3 d-flex justify-content-between align-items-center bg-warning text-white">
                <h6 class="m-0 font-weight-bold">Pedido #1235</h6>
                <span class="badge bg-light text-dark">10:05</span>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Cliente:</strong> Ana Costa<br>
                    <strong>Tipo:</strong> Balcão<br>
                    <strong>Observação:</strong> Cliente está aguardando no local.
                </div>
                
                <div class="list-group mb-3">
                    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>2x X-Bacon</strong>
                            <div class="small text-muted">Sem tomate</div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success">
                                <i class="bi bi-check-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>1x Batata Frita</strong>
                            <div class="small text-muted">Com cheddar e bacon</div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success">
                                <i class="bi bi-check-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>2x Refrigerante</strong>
                            <div class="small text-muted">Guaraná</div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success">
                                <i class="bi bi-check-lg"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="d-grid gap-2">
                    <button class="btn btn-success">
                        <i class="bi bi-check-circle me-1"></i> Pedido Pronto
                    </button>
                    <button class="btn btn-outline-danger">
                        <i class="bi bi-exclamation-triangle me-1"></i> Reportar Problema
                    </button>
                </div>
            </div>
            <div class="card-footer text-muted">
                <div class="progress">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">Em preparo</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Pedido 3 -->
    <div class="col-md-4 mb-4">
        <div class="card shadow h-100">
            <div class="card-header py-3 d-flex justify-content-between align-items-center bg-warning text-white">
                <h6 class="m-0 font-weight-bold">Pedido #1236</h6>
                <span class="badge bg-light text-dark">10:15</span>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Cliente:</strong> Pedro Santos<br>
                    <strong>Tipo:</strong> Mesa 5<br>
                    <strong>Observação:</strong> Sem observações.
                </div>
                
                <div class="list-group mb-3">
                    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>1x X-Salada</strong>
                            <div class="small text-muted">Sem observações</div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success">
                                <i class="bi bi-check-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>1x Batata Frita</strong>
                            <div class="small text-muted">Porção média</div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success">
                                <i class="bi bi-check-lg"></i>
                            </button>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                            <strong>1x Refrigerante</strong>
                            <div class="small text-muted">Sprite</div>
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-sm btn-outline-warning">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-success">
                                <i class="bi bi-check-lg"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="d-grid gap-2">
                    <button class="btn btn-success">
                        <i class="bi bi-check-circle me-1"></i> Pedido Pronto
                    </button>
                    <button class="btn btn-outline-danger">
                        <i class="bi bi-exclamation-triangle me-1"></i> Reportar Problema
                    </button>
                </div>
            </div>
            <div class="card-footer text-muted">
                <div class="progress">
                    <div class="progress-bar bg-warning" role="progressbar" style="width: 10%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100">Em preparo</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal Observação -->
<div class="modal fade" id="observacaoModal" tabindex="-1" aria-labelledby="observacaoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="observacaoModalLabel">Adicionar Observação</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="observacaoItem" class="form-label">Observação</label>
                        <textarea class="form-control" id="observacaoItem" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary">Salvar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Problema -->
<div class="modal fade" id="problemaModal" tabindex="-1" aria-labelledby="problemaModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="problemaModalLabel">Reportar Problema</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="tipoProblema" class="form-label">Tipo de Problema</label>
                        <select class="form-select" id="tipoProblema" required>
                            <option value="">Selecione o problema</option>
                            <option value="falta_ingrediente">Falta de Ingrediente</option>
                            <option value="equipamento">Problema no Equipamento</option>
                            <option value="pedido_incorreto">Pedido Incorreto</option>
                            <option value="outro">Outro</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="descricaoProblema" class="form-label">Descrição do Problema</label>
                        <textarea class="form-control" id="descricaoProblema" rows="3" required></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-danger">Reportar</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Simulação de atualização automática
        let intervaloAtualizacao;
        
        function iniciarAtualizacaoAutomatica() {
            intervaloAtualizacao = setInterval(function() {
                console.log('Atualizando pedidos...');
                // Aqui seria a chamada AJAX para atualizar os pedidos
            }, 30000); // Atualiza a cada 30 segundos
        }
        
        function pararAtualizacaoAutomatica() {
            clearInterval(intervaloAtualizacao);
        }
        
        // Iniciar atualização automática se o checkbox estiver marcado
        if (document.getElementById('atualizacaoAutomatica').checked) {
            iniciarAtualizacaoAutomatica();
        }
        
        // Alternar atualização automática
        document.getElementById('atualizacaoAutomatica').addEventListener('change', function() {
            if (this.checked) {
                iniciarAtualizacaoAutomatica();
            } else {
                pararAtualizacaoAutomatica();
            }
        });
        
        // Botão de atualização manual
        document.getElementById('btnAtualizar').addEventListener('click', function() {
            console.log('Atualizando pedidos manualmente...');
            // Aqui seria a chamada AJAX para atualizar os pedidos
        });
    });
</script>
{% endblock %}
